<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>WeatherStar 4000+</title>

<style>
@font-face {
  font-family: "Star4000";
  src: url("https://wsbylunv.neocities.org/Star4000.ttf") format("truetype");
}

html, body {
  margin: 0;
  background: black;
}

#screen {
  position: relative;
  width: 1797px;
  height: 1347px;
  margin: auto;
  font-family: Star4000, monospace;
}

.ws-text {
  line-height: 1.05;
  letter-spacing: 1px;
  -webkit-text-stroke: 1px black;
  text-shadow:
    1px 1px 0 black,
   -1px 1px 0 black,
    1px -1px 0 black,
   -1px -1px 0 black;
}

.ws-yellow { color: #FFE866; }
.ws-white { color: #FFFFFF; }

.hidden { opacity: 0; }
.visible { opacity: 1; }

/* background */
#bg {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
}

/* header */
#header {
  position: absolute;
  top: 110px;
  left: 335px;
  right: 80px;
  height: 160px;
  display: flex;
  align-items: center;
}

#title {
  margin-left: 220px;
  font-size: 64px;
}

#time {
  margin-left: auto;
  font-size: 44px;
  text-align: right;
}

/* CURRENT CONDITIONS */
#cc {
  position: absolute;
  top: 300px;
  left: 240px;
  width: 1300px;
  height: 700px;
}

#temp {
  font-size: 140px;
}

#cond {
  font-size: 56px;
  margin-top: 10px;
}

#icon {
  margin-top: 30px;
  width: 220px;
}

#city {
  position: absolute;
  top: 0;
  right: 0;
  font-size: 110px;
}

#stats {
  position: absolute;
  top: 170px;
  right: 0;
  font-size: 46px;
  line-height: 1.25;
}

/* TRAVEL FORECAST */
#travel {
  position: absolute;
  top: 300px;
  left: 240px;
  width: 1300px;
  height: 700px;
  display: none;
}

.travel-list {
  font-size: 52px;
  line-height: 1.3;
}

/* footer */
#footer {
  position: absolute;
  bottom: 110px;
  width: 100%;
  text-align: center;
  font-size: 64px;
}
</style>
</head>

<body>

<div id="screen">
  <img id="bg" src="https://wsbylunv.neocities.org/ws4000_bg.png">

  <div id="header">
    <div id="title" class="ws-text ws-yellow" id="pageTitle">
      <div>Current</div>
      <div>Conditions</div>
    </div>
    <div id="time" class="ws-text ws-white"></div>
  </div>

  <!-- CURRENT CONDITIONS -->
  <div id="cc" class="visible">
    <div id="temp" class="ws-text ws-white">--°</div>
    <div id="cond" class="ws-text ws-white">Loading…</div>
    <img id="icon" src="">
    <div id="city" class="ws-text ws-white">Tampa, FL</div>
    <div id="stats" class="ws-text ws-white"></div>
  </div>

  <!-- TRAVEL FORECAST -->
  <div id="travel">
    <div class="ws-text ws-yellow" style="font-size:64px;margin-bottom:20px;">
      Travel Forecast for Tomorrow
    </div>
    <div class="travel-list ws-text ws-white">
      Atlanta<br>
      Boston<br>
      Chicago<br>
      Dallas<br>
      Denver<br>
      Los Angeles<br>
      New York<br>
      San Francisco<br>
      Seattle<br>
      Washington, DC
    </div>
  </div>

  <div id="footer" class="ws-text ws-white">
    Conditions at Tampa
  </div>
</div>

<script>
/* CLOCK */
function updateTime() {
  const now = new Date();
  document.getElementById("time").innerHTML =
    now.toLocaleTimeString("en-US") + "<br>" +
    now.toDateString().toUpperCase();
}
setInterval(updateTime, 1000);
updateTime();

/* ICON MAP */
function getIcon(desc) {
  const c = desc.toLowerCase();
  if (c.includes("thunder")) return "Thunderstorm.gif";
  if (c.includes("snow")) return "Snow.gif";
  if (c.includes("rain")) return "Rain.gif";
  if (c.includes("fog")) return "Fog.gif";
  if (c.includes("clear")) return "Clear.gif";
  return "Cloudy.gif";
}

/* WEATHER LOAD */
async function loadWeather() {
  const point = await fetch("https://api.weather.gov/points/27.95,-82.46").then(r=>r.json());
  const stations = await fetch(point.properties.observationStations).then(r=>r.json());
  const obs = await fetch(stations.features[0].id + "/observations/latest").then(r=>r.json());
  const d = obs.properties;

  document.getElementById("temp").textContent =
    Math.round(d.temperature.value * 9/5 + 32) + "°";
  document.getElementById("cond").textContent = d.textDescription;
  document.getElementById("icon").src =
    "https://wsbylunv.neocities.org/yea/" + getIcon(d.textDescription);

  document.getElementById("stats").innerHTML = `
    Humidity: ${Math.round(d.relativeHumidity.value)}%<br>
    Wind: ${Math.round(d.windSpeed.value * 2.237)} mph<br>
    Pressure: ${(d.barometricPressure.value / 3386).toFixed(2)}
  `;
}
loadWeather();

/* PAGE ROTATION */
let page = 0;

setInterval(() => {
  const cc = document.getElementById("cc");
  const tf = document.getElementById("travel");
  const title = document.getElementById("pageTitle");

  page = (page + 1) % 2;

  if (page === 1) {
    cc.style.display = "none";
    tf.style.display = "block";
    title.innerHTML = "<div>Travel</div><div>Forecast</div>";
  } else {
    tf.style.display = "none";
    cc.style.display = "block";
    title.innerHTML = "<div>Current</div><div>Conditions</div>";
  }
}, 12000);
</script>

</body>
</html>
